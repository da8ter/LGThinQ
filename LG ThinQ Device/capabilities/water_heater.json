{
  "capabilities": [
    {
      "ident": "WATER_HEATER_OPERATION",
      "name": "Betrieb",
      "type": "integer",
      "presentation": { "kind": "buttons", "options": [
        { "value": 0, "caption": "Stop", "color": 16711680 },
        { "value": 1, "caption": "Start", "color": 52651 },
        { "value": 2, "caption": "Pause", "color": 16026947 }
      ] },
      "create": { "when": "profileHasAny", "keys": [
        "operation.waterHeaterOperationMode",
        "waterHeaterOperationMode",
        "operation.hotWaterOperationMode",
        "hotWaterOperationMode",
        "operation.mode"
      ] },
      "action": { "enableWhen": "profileWriteableAny", "writeableKeys": [
        "operation.waterHeaterOperationMode.mode",
        "waterHeaterOperationMode.mode",
        "operation.hotWaterOperationMode.mode",
        "hotWaterOperationMode.mode",
        "operation.mode"
      ], "reassertOn": ["setup", "status"] },
      "read": { "sources": [
        "operation.waterHeaterOperationMode",
        "waterHeaterOperationMode",
        "operation.hotWaterOperationMode",
        "hotWaterOperationMode",
        "operation.mode"
      ], "map": { "START": 1, "PAUSE": 2, "STOP": 0 }, "mapCaseInsensitive": true },
      "write": { "enumMap": {
        "1": { "operation.waterHeaterOperationMode": "START" },
        "2": { "operation.waterHeaterOperationMode": "PAUSE" },
        "0": { "operation.waterHeaterOperationMode": "STOP" }
      } }
    },

    {
      "ident": "WH_MODE",
      "name": "Modus",
      "type": "integer",
      "presentation": { "kind": "enumeration", "options": [
        { "value": 1, "caption": "Auto", "color": 52651 },
        { "value": 2, "caption": "Eco", "color": 8421504 },
        { "value": 3, "caption": "Normal", "color": 16777215 },
        { "value": 4, "caption": "Boost", "color": 16711680 },
        { "value": 5, "caption": "Urlaub", "color": 3442154 }
      ] },
      "create": { "when": "profileHasAny", "keys": [
        "waterHeaterJobMode.currentJobMode",
        "hotWaterJobMode.currentJobMode",
        "operation.mode",
        "mode"
      ] },
      "action": { "enableWhen": "profileWriteableAny", "writeableKeys": [
        "waterHeaterJobMode.currentJobMode.mode",
        "hotWaterJobMode.currentJobMode.mode",
        "operation.mode"
      ], "reassertOn": ["setup", "status"] },
      "read": { "sources": [
        "waterHeaterJobMode.currentJobMode",
        "hotWaterJobMode.currentJobMode",
        "operation.mode",
        "mode"
      ], "map": { "AUTO": 1, "ECO": 2, "NORMAL": 3, "BOOST": 4, "VACATION": 5 }, "mapCaseInsensitive": true },
      "write": { "enumMap": {
        "1": { "waterHeaterJobMode.currentJobMode": "AUTO" },
        "2": { "waterHeaterJobMode.currentJobMode": "ECO" },
        "3": { "waterHeaterJobMode.currentJobMode": "NORMAL" },
        "4": { "waterHeaterJobMode.currentJobMode": "BOOST" },
        "5": { "waterHeaterJobMode.currentJobMode": "VACATION" }
      } }
    },

    {
      "ident": "TARGET_WATER_TEMP",
      "name": "Soll Wasser",
      "type": "float",
      "presentation": {
        "kind": "slider",
        "suffix": " °C",
        "usageType": 0,
        "gradientType": 1,
        "range": { "min": 30, "max": 75, "step": 1 },
        "rangeFromProfile": {
          "min": [
            "water.target.value.w.min",
            "hotWater.target.value.w.min",
            "dhw.target.value.w.min"
          ],
          "max": [
            "water.target.value.w.max",
            "hotWater.target.value.w.max",
            "dhw.target.value.w.max"
          ],
          "step": [
            "water.target.value.w.step",
            "hotWater.target.value.w.step",
            "dhw.target.value.w.step"
          ]
        }
      },
      "create": { "when": "profileHasAny", "keys": ["water.target", "hotWater.target", "dhw.target"] },
      "action": { "enableWhen": "profileWriteableAny", "writeableKeys": ["water.target.mode", "hotWater.target.mode", "dhw.target.mode"], "reassertOn": ["setup", "status"] },
      "read": { "sources": ["water.target", "hotWater.target", "dhw.target"] },
      "write": { "template": { "water": { "target": "@float", "unit": "C" } } }
    },

    {
      "ident": "WATER_TEMP",
      "name": "Wassertemperatur",
      "type": "float",
      "presentation": { "kind": "value", "suffix": " °C", "usageType": 1 },
      "create": { "when": "statusHasAny", "keys": [
        "temperature.water.current", "waterTemperature", "dhwTemperature", "hotWaterTemperature"
      ] },
      "action": { "enableWhen": "never" },
      "read": { "sources": ["temperature.water.current", "waterTemperature", "dhwTemperature", "hotWaterTemperature"] }
    },

    {
      "ident": "TANK_LEVEL_PERCENT",
      "name": "Tankstand",
      "type": "integer",
      "presentation": { "kind": "value", "suffix": " %" },
      "create": { "when": "statusHasAny", "keys": ["tank.remainPercent", "waterTank.remainPercent", "tank.levelPercent"] },
      "action": { "enableWhen": "never" },
      "read": { "sources": ["tank.remainPercent", "waterTank.remainPercent", "tank.levelPercent"] }
    },

    {
      "ident": "ANODE_REMAIN_PERCENT",
      "name": "Anode verbleibend",
      "type": "integer",
      "presentation": { "kind": "value", "suffix": " %" },
      "create": { "when": "statusHasAny", "keys": ["anode.remainPercent", "anodeRemainPercent"] },
      "action": { "enableWhen": "never" },
      "read": { "sources": ["anode.remainPercent", "anodeRemainPercent"] }
    },

    {
      "ident": "STERILIZE",
      "name": "Sterilisieren",
      "type": "boolean",
      "presentation": { "kind": "switch", "captionOn": "An", "captionOff": "Aus" },
      "create": { "when": "profileHasAny", "keys": ["sterilize", "uvSterilize", "sterilization"] },
      "action": { "enableWhen": "profileWriteableAny", "writeableKeys": ["sterilize.mode", "uvSterilize.mode", "sterilization.mode"], "reassertOn": ["setup", "status"] },
      "read": { "sources": ["sterilize", "uvSterilize", "sterilization"], "string_true": ["ON", "TRUE", "1"], "string_false": ["OFF", "FALSE", "0"] },
      "write": { "template": { "sterilize": "@onoff" } }
    },

    {
      "ident": "CHILD_LOCK",
      "name": "Kindersicherung",
      "type": "boolean",
      "presentation": { "kind": "switch", "captionOn": "An", "captionOff": "Aus" },
      "create": { "when": "profileHasAny", "keys": ["childLock", "childLock.enabled", "lock.child"] },
      "action": { "enableWhen": "profileWriteableAny", "writeableKeys": ["childLock.mode", "childLock.enabled.mode"], "reassertOn": ["setup", "status"] },
      "read": { "sources": ["childLock", "childLock.enabled", "lock.child"] },
      "write": { "template": { "childLock": { "enabled": "@bool" } } }
    },

    {
      "ident": "POWER",
      "name": "Power",
      "type": "boolean",
      "presentation": { "kind": "switch", "captionOn": "An", "captionOff": "Aus" },
      "create": { "when": "profileHasAny", "keys": ["operation.power", "power", "is_on"] },
      "action": { "enableWhen": "never" },
      "read": { "sources": ["operation.power", "power", "is_on"], "map": { "ON": true, "1": true, "TRUE": true, "OFF": false, "0": false, "FALSE": false } }
    }
  ]
}
