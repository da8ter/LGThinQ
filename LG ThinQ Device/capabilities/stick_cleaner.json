{
  "capabilities": [
    {
      "ident": "STICK_OPERATION",
      "name": "Betrieb",
      "type": "integer",
      "presentation": { "kind": "buttons", "options": [
        { "value": 1, "caption": "Start" },
        { "value": 2, "caption": "Pause" },
        { "value": 0, "caption": "Stop" }
      ] },
      "create": { "when": "profileHasAny", "keys": [
        "operation.stickCleanerOperationMode",
        "stickCleanerOperationMode",
        "operation.vacuumOperationMode",
        "operation.mode"
      ] },
      "action": { "enableWhen": "profileWriteableAny", "writeableKeys": [
        "operation.stickCleanerOperationMode.mode",
        "stickCleanerOperationMode.mode",
        "operation.vacuumOperationMode.mode",
        "operation.mode"
      ], "reassertOn": ["setup", "status"] },
      "read": { "sources": [
        "operation.stickCleanerOperationMode",
        "stickCleanerOperationMode",
        "operation.vacuumOperationMode",
        "operation.mode"
      ], "map": { "START": 1, "PAUSE": 2, "STOP": 0 }, "mapCaseInsensitive": true },
      "write": { "enumMap": {
        "1": { "operation.stickCleanerOperationMode": "START" },
        "2": { "operation.stickCleanerOperationMode": "PAUSE" },
        "0": { "operation.stickCleanerOperationMode": "STOP" }
      } }
    },

    {
      "ident": "RUN_STATE",
      "name": "Status",
      "type": "string",
      "presentation": { "kind": "value" },
      "create": { "when": "statusHasAny", "keys": ["runState.currentState", "currentState", "runState", "process.state", "state"] },
      "action": { "enableWhen": "never" },
      "read": { "sources": ["runState.currentState", "currentState", "runState", "process.state", "state"] }
    },

    {
      "ident": "REMAIN_MIN",
      "name": "Restzeit",
      "type": "integer",
      "presentation": { "kind": "value", "suffix": " min" },
      "create": { "when": "statusHasAny", "keys": ["remainTime", "remainTime.minute", "remainTimeInMinute", "remainMinute", "timer.remainMinute"] },
      "action": { "enableWhen": "never" },
      "read": {
        "composite": { "combine": "hm_to_minutes", "parts": [ { "path": "remainTime.hour" }, { "path": "remainTime.minute" } ] },
        "sources": ["remainTimeInMinute", "remainMinute", "timer.remainMinute"]
      }
    },

    {
      "ident": "PROGRESS",
      "name": "Fortschritt",
      "type": "integer",
      "presentation": { "kind": "value", "suffix": " %" },
      "create": { "when": "statusHasAny", "keys": ["progress", "process.progress"] },
      "action": { "enableWhen": "never" },
      "read": { "sources": ["progress", "process.progress"] }
    },

    {
      "ident": "BATTERY_LEVEL",
      "name": "Batterie",
      "type": "integer",
      "presentation": { "kind": "value", "suffix": " %" },
      "create": { "when": "statusHasAny", "keys": ["battery.batteryLevel", "batteryLevel", "battery.level", "battery.levelInPercent"] },
      "action": { "enableWhen": "never" },
      "read": { "sources": ["battery.batteryLevel", "batteryLevel", "battery.level", "battery.levelInPercent"] }
    },

    {
      "ident": "CHARGING",
      "name": "Laden",
      "type": "boolean",
      "presentation": { "kind": "switch", "captionOn": "L채dt", "captionOff": "Nicht laden" },
      "create": { "when": "statusHasAny", "keys": ["battery.charging", "isCharging", "chargingState"] },
      "action": { "enableWhen": "never" },
      "read": { "sources": ["battery.charging", "isCharging", "chargingState"], "string_true": ["TRUE", "1", "ON", "CHARGING"], "string_false": ["FALSE", "0", "OFF", "DISCHARGING"] }
    },

    {
      "ident": "SUCTION_LEVEL",
      "name": "Saugst채rke",
      "type": "integer",
      "presentation": { "kind": "buttons" },
      "create": { "when": "profileHasAny", "keys": ["suctionLevel", "suction", "fanSpeed", "airFlow.windStrength", "powerMode"] },
      "action": { "enableWhen": "profileWriteableAny", "writeableKeys": ["suctionLevel.mode", "suction.mode", "fanSpeed.mode", "airFlow.windStrength.mode", "powerMode.mode"], "reassertOn": ["setup", "status"] },
      "read": { "sources": ["suctionLevel", "suction", "fanSpeed", "airFlow.windStrength", "powerMode"], "map": { "AUTO": 10, "LOW": 11, "MID": 12, "HIGH": 13, "TURBO": 14, "BOOST": 14 }, "mapCaseInsensitive": true },
      "write": { "enumMap": {
        "10": { "suctionLevel": "AUTO",  "fanSpeed": "AUTO",  "airFlow.windStrength": "AUTO",  "powerMode": "AUTO" },
        "11": { "suctionLevel": "LOW",   "fanSpeed": "LOW",   "airFlow.windStrength": "LOW",   "powerMode": "LOW" },
        "12": { "suctionLevel": "MID",   "fanSpeed": "MID",   "airFlow.windStrength": "MID",   "powerMode": "MID" },
        "13": { "suctionLevel": "HIGH",  "fanSpeed": "HIGH",  "airFlow.windStrength": "HIGH",  "powerMode": "HIGH" },
        "14": { "suctionLevel": "TURBO", "fanSpeed": "TURBO", "airFlow.windStrength": "TURBO", "powerMode": "TURBO" }
      } }
    },

    {
      "ident": "TURBO",
      "name": "Turbo",
      "type": "boolean",
      "presentation": { "kind": "switch", "captionOn": "An", "captionOff": "Aus" },
      "create": { "when": "profileHasAny", "keys": ["turbo", "boost", "power.boost"] },
      "action": { "enableWhen": "profileWriteableAny", "writeableKeys": ["turbo.mode", "boost.mode", "power.boost.mode"], "reassertOn": ["setup", "status"] },
      "read": { "sources": ["turbo", "boost", "power.boost"], "string_true": ["ON", "TRUE", "1"], "string_false": ["OFF", "FALSE", "0"] },
      "write": { "template": { "turbo": "@onoff" } }
    },

    {
      "ident": "BRUSH",
      "name": "B체rste",
      "type": "boolean",
      "presentation": { "kind": "switch", "captionOn": "An", "captionOff": "Aus" },
      "create": { "when": "profileHasAny", "keys": ["brush", "brush.on", "motor.brush", "rollerBrush"] },
      "action": { "enableWhen": "profileWriteableAny", "writeableKeys": ["brush.mode", "brush.on.mode", "motor.brush.mode", "rollerBrush.mode"], "reassertOn": ["setup", "status"] },
      "read": { "sources": ["brush", "brush.on", "motor.brush", "rollerBrush"], "string_true": ["ON", "TRUE", "1"], "string_false": ["OFF", "FALSE", "0"] },
      "write": { "template": { "brush": "@onoff" } }
    },

    {
      "ident": "DUSTBIN_FULL",
      "name": "Staubbeh채lter voll",
      "type": "boolean",
      "presentation": { "kind": "switch", "captionOn": "Voll", "captionOff": "OK" },
      "create": { "when": "statusHasAny", "keys": ["dustbin.full", "dustBin.full", "bin.full", "dust.full"] },
      "action": { "enableWhen": "never" },
      "read": { "sources": ["dustbin.full", "dustBin.full", "bin.full", "dust.full"], "string_true": ["FULL", "TRUE", "1", "ON"], "string_false": ["EMPTY", "FALSE", "0", "OFF"] }
    },

    {
      "ident": "FILTER_REMAIN_PERCENT",
      "name": "Filter verbleibend",
      "type": "integer",
      "presentation": { "kind": "value", "suffix": " %" },
      "create": { "when": "profileHasAny", "keys": ["filter.remainPercent", "filterRemainPercent", "filter.remain"] },
      "action": { "enableWhen": "never" },
      "read": { "sources": ["filter.remainPercent", "filterRemainPercent", "filter.remain"] }
    },

    {
      "ident": "CHILD_LOCK",
      "name": "Kindersicherung",
      "type": "boolean",
      "presentation": { "kind": "switch", "captionOn": "An", "captionOff": "Aus" },
      "create": { "when": "profileHasAny", "keys": ["childLock", "childLock.enabled", "lock.child"] },
      "action": { "enableWhen": "profileWriteableAny", "writeableKeys": ["childLock.mode", "childLock.enabled.mode"], "reassertOn": ["setup", "status"] },
      "read": { "sources": ["childLock", "childLock.enabled", "lock.child"] },
      "write": { "template": { "childLock": { "enabled": "@bool" } } }
    }
  ]
}
