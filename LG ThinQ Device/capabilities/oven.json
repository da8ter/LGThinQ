{
  "capabilities": [
    {
      "ident": "OVEN_OPERATION",
      "name": "Ofenbetrieb",
      "type": "integer",
      "presentation": { "kind": "buttons", "options": [
        { "value": 1, "caption": "Start", "color": 52651 },
        { "value": 2, "caption": "Pause", "color": 16026947 },
        { "value": 3, "caption": "Stop", "color": 16711680 }
      ] },
      "create": { "when": "profileHasAny", "keys": ["operation.ovenOperationMode", "ovenOperationMode"] },
      "action": { "enableWhen": "profileWriteableAny", "writeableKeys": ["operation.ovenOperationMode.mode", "ovenOperationMode.mode"], "reassertOn": ["setup", "status"] },
      "read": { "sources": ["operation.ovenOperationMode", "ovenOperationMode"], "map": { "START": 1, "PAUSE": 2, "STOP": 3 }, "mapCaseInsensitive": true },
      "write": { "enumMap": {
        "1": { "operation.ovenOperationMode": "START" },
        "2": { "operation.ovenOperationMode": "PAUSE" },
        "3": { "operation.ovenOperationMode": "STOP" }
      } }
    },

    {
      "ident": "OVEN_MODE",
      "name": "Modus",
      "type": "integer",
      "presentation": { "kind": "buttons", "options": [
        { "value": 1, "caption": "Backen", "color": 52651 },
        { "value": 2, "caption": "Grillen", "color": 16026947 },
        { "value": 3, "caption": "Braten", "color": 16753920 },
        { "value": 4, "caption": "Umluft", "color": 3442154 },
        { "value": 5, "caption": "Air Fry", "color": 16711935 },
        { "value": 6, "caption": "Warmhalten", "color": 8421504 }
      ] },
      "create": { "when": "profileHasAny", "keys": ["cookMode", "operation.mode", "mode"] },
      "action": { "enableWhen": "profileWriteableAny", "writeableKeys": ["cookMode.mode", "operation.mode"], "reassertOn": ["setup", "status"] },
      "read": { "sources": ["cookMode", "operation.mode", "mode"], "map": { "BAKE": 1, "BROIL": 2, "ROAST": 3, "CONVECTION_BAKE": 4, "AIR_FRY": 5, "WARM": 6 }, "mapCaseInsensitive": true },
      "write": { "enumMap": {
        "1": { "cookMode": "BAKE" },
        "2": { "cookMode": "BROIL" },
        "3": { "cookMode": "ROAST" },
        "4": { "cookMode": "CONVECTION_BAKE" },
        "5": { "cookMode": "AIR_FRY" },
        "6": { "cookMode": "WARM" }
      } }
    },

    {
      "ident": "OVEN_SET_TEMP",
      "name": "Solltemperatur",
      "type": "float",
      "presentation": {
        "kind": "slider",
        "suffix": " °C",
        "range": { "min": 30, "max": 280, "step": 1 },
        "rangeFromProfile": {
          "min": [
            "temperature.targetTemperature.value.w.min",
            "temperature.targetTemperature.value.r.min",
            "cookTemperature.value.w.min",
            "oven.temperature.target.value.w.min"
          ],
          "max": [
            "temperature.targetTemperature.value.w.max",
            "temperature.targetTemperature.value.r.max",
            "cookTemperature.value.w.max",
            "oven.temperature.target.value.w.max"
          ],
          "step": [
            "temperature.targetTemperature.value.w.step",
            "temperature.targetTemperature.value.r.step",
            "cookTemperature.value.w.step",
            "oven.temperature.target.value.w.step"
          ]
        }
      },
      "create": { "when": "profileHasAny", "keys": ["temperature.targetTemperature", "cookTemperature", "oven.temperature.target"] },
      "action": { "enableWhen": "profileWriteableAny", "writeableKeys": ["temperature.targetTemperature.mode", "cookTemperature.mode", "oven.temperature.target.mode"], "reassertOn": ["setup", "status"] },
      "read": { "sources": ["temperature.targetTemperature", "cookTemperature", "oven.temperature.target"] },
      "write": { "template": { "temperature": { "targetTemperature": "@float", "unit": "C" } } }
    },

    {
      "ident": "OVEN_CUR_TEMP",
      "name": "Isttemperatur",
      "type": "float",
      "presentation": { "kind": "value", "suffix": " °C" },
      "create": { "when": "statusHasAny", "keys": ["temperature.currentTemperature", "currentTemperature", "oven.temperature.current"] },
      "action": { "enableWhen": "never" },
      "read": { "sources": ["temperature.currentTemperature", "currentTemperature", "oven.temperature.current"] }
    },

    {
      "ident": "OVEN_REMAIN_MIN",
      "name": "Restzeit",
      "type": "integer",
      "presentation": { "kind": "value", "suffix": " min" },
      "create": { "when": "profileHasAny", "keys": ["remainTime", "remainTime.minute", "remainTimeInMinute", "remainMinute", "timer.remainHour", "timer.remainMinute"] },
      "action": { "enableWhen": "always", "reassertOn": ["status"] },
      "read": {
        "composite": { "combine": "hm_to_minutes", "parts": [ { "path": "remainTime.hour" }, { "path": "remainTime.minute" } ] },
        "sources": ["remainTimeInMinute", "remainMinute", "timer.remainMinute"]
      }
    },

    {
      "ident": "OVEN_LIGHT",
      "name": "Licht",
      "type": "boolean",
      "presentation": { "kind": "switch", "captionOn": "An", "captionOff": "Aus" },
      "create": { "when": "profileHasAny", "keys": ["light", "display.light"] },
      "action": { "enableWhen": "profileWriteableAny", "writeableKeys": ["light.mode", "display.light.mode"], "reassertOn": ["setup", "status"] },
      "read": { "sources": ["light", "display.light"], "string_true": ["ON", "TRUE", "1"], "string_false": ["OFF", "FALSE", "0"] },
      "write": { "template": { "light": "@onoff" } }
    },

    {
      "ident": "OVEN_DOOR_OPEN",
      "name": "Tür offen",
      "type": "boolean",
      "presentation": { "kind": "switch", "captionOn": "Offen", "captionOff": "Zu" },
      "create": { "when": "statusHasAny", "keys": ["doorOpen", "door", "door.status"] },
      "action": { "enableWhen": "never" },
      "read": { "sources": ["doorOpen", "door", "door.status"], "string_true": ["OPEN", "ON", "TRUE", "1"], "string_false": ["CLOSE", "CLOSED", "OFF", "FALSE", "0"] }
    }
  ]
}
