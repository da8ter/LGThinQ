{
  "capabilities": [
    {
      "ident": "POWER",
      "name": "Power",
      "type": "boolean",
      "presentation": { "kind": "switch", "captionOn": "An", "captionOff": "Aus" },
      "create": { "when": "profileHasAny", "keys": ["operation.power", "power", "is_on"] },
      "action": { "enableWhen": "never" },
      "read": { "sources": ["operation.power", "power", "is_on"], "map": { "ON": true, "1": true, "TRUE": true, "OFF": false, "0": false, "FALSE": false } }
    },

    {
      "ident": "FAN_MODE",
      "name": "LÃ¼fterstufe",
      "type": "integer",
      "presentation": { "kind": "enumeration", "options": [
        { "value": 10, "caption": "Auto", "color": 52651 },
        { "value": 11, "caption": "Niedrig", "color": 3442154 },
        { "value": 12, "caption": "Mittel", "color": 16777215 },
        { "value": 13, "caption": "Hoch", "color": 16026947 },
        { "value": 14, "caption": "Turbo", "color": 16711680 }
      ] },
      "create": { "when": "profileHasAny", "keys": ["fanSpeed", "airFlow.windStrength", "windStrength", "fan.level"] },
      "action": { "enableWhen": "profileWriteableAny", "writeableKeys": ["fanSpeed.mode", "airFlow.windStrength.mode", "fan.level.mode"], "reassertOn": ["setup", "status"] },
      "read": { "sources": ["fanSpeed", "airFlow.windStrength", "windStrength", "fan.level"], "map": { "AUTO": 10, "LOW": 11, "MID": 12, "HIGH": 13, "TURBO": 14, "BOOST": 14 }, "mapCaseInsensitive": true },
      "write": { "enumMap": {
        "10": { "fanSpeed": "AUTO",  "airFlow.windStrength": "AUTO",  "fan.level": "AUTO" },
        "11": { "fanSpeed": "LOW",   "airFlow.windStrength": "LOW",   "fan.level": "LOW" },
        "12": { "fanSpeed": "MID",   "airFlow.windStrength": "MID",   "fan.level": "MID" },
        "13": { "fanSpeed": "HIGH",  "airFlow.windStrength": "HIGH",  "fan.level": "HIGH" },
        "14": { "fanSpeed": "TURBO", "airFlow.windStrength": "TURBO", "fan.level": "TURBO" }
      } }
    },

    {
      "ident": "HOOD_LIGHT",
      "name": "Licht",
      "type": "boolean",
      "presentation": { "kind": "switch", "captionOn": "An", "captionOff": "Aus" },
      "create": { "when": "profileHasAny", "keys": ["display.light", "light"] },
      "action": { "enableWhen": "profileWriteableAny", "writeableKeys": ["display.light.mode", "light.mode"], "reassertOn": ["setup", "status"] },
      "read": { "sources": ["display.light", "light"], "string_true": ["ON", "TRUE", "1"], "string_false": ["OFF", "FALSE", "0"] },
      "write": { "firstOf": [
        { "profileWriteableAny": ["display.light.mode"], "attribute": { "resource": "display", "property": "light", "valueTemplate": "@onoff" } },
        { "profileWriteableAny": ["light.mode"],         "template":  { "light": "@onoff" } }
      ] }
    },

    {
      "ident": "FILTER_REMAIN_PERCENT",
      "name": "Filter verbleibend",
      "type": "integer",
      "presentation": { "kind": "value", "suffix": " %" },
      "create": { "when": "profileHasAny", "keys": ["filter.remainPercent", "filterRemainPercent", "filter.remain"] },
      "action": { "enableWhen": "never" },
      "read": { "sources": ["filter.remainPercent", "filterRemainPercent", "filter.remain"] }
    },

    {
      "ident": "REMAIN_MIN",
      "name": "Restzeit",
      "type": "integer",
      "presentation": { "kind": "value", "suffix": " min" },
      "create": { "when": "profileHasAny", "keys": ["timer.remainMinute", "remainTimeInMinute", "remainMinute", "remainTime.minute"] },
      "action": { "enableWhen": "never" },
      "read": {
        "composite": { "combine": "hm_to_minutes", "parts": [ { "path": "remainTime.hour" }, { "path": "remainTime.minute" } ] },
        "sources": ["timer.remainMinute", "remainTimeInMinute", "remainMinute"]
      }
    }
  ]
}
