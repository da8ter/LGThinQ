{
  "capabilities": [
    {
      "ident": "DEHUM_OPERATION",
      "name": "Entfeuchten",
      "type": "integer",
      "presentation": { "kind": "buttons", "options": [
        { "value": 0, "caption": "Stop", "color": 16711680 },
        { "value": 1, "caption": "Start", "color": 52651 },
        { "value": 2, "caption": "Pause", "color": 16026947 }
      ] },
      "create": { "when": "profileHasAny", "keys": ["operation.dehumidifierOperationMode", "dehumidifierOperationMode", "operation.mode"] },
      "action": { "enableWhen": "profileWriteableAny", "writeableKeys": ["operation.dehumidifierOperationMode.mode", "dehumidifierOperationMode.mode", "operation.mode"], "reassertOn": ["setup", "status"] },
      "read": { "sources": ["operation.dehumidifierOperationMode", "dehumidifierOperationMode", "operation.mode"], "map": { "START": 1, "PAUSE": 2, "STOP": 0 }, "mapCaseInsensitive": true },
      "write": { "enumMap": {
        "1": { "operation.dehumidifierOperationMode": "START" },
        "2": { "operation.dehumidifierOperationMode": "PAUSE" },
        "0": { "operation.dehumidifierOperationMode": "STOP" }
      } }
    },

    {
      "ident": "POWER",
      "name": "Power",
      "type": "boolean",
      "presentation": { "kind": "switch", "captionOn": "An", "captionOff": "Aus" },
      "create": { "when": "profileHasAny", "keys": ["operation.power", "power", "is_on"] },
      "action": { "enableWhen": "never" },
      "read": { "sources": ["operation.power", "power", "is_on"], "map": { "ON": true, "1": true, "TRUE": true, "OFF": false, "0": false, "FALSE": false } }
    },

    {
      "ident": "TARGET_HUMIDITY",
      "name": "Ziel-Feuchte",
      "type": "integer",
      "presentation": {
        "kind": "slider",
        "suffix": " %",
        "range": { "min": 30, "max": 80, "step": 5, "digits": 0 },
        "rangeFromProfile": {
          "min": [
            "humidity.target.value.w.min",
            "relativeHumidity.target.value.w.min",
            "targetHumidity.value.w.min",
            "humiditySetting.value.w.min"
          ],
          "max": [
            "humidity.target.value.w.max",
            "relativeHumidity.target.value.w.max",
            "targetHumidity.value.w.max",
            "humiditySetting.value.w.max"
          ],
          "step": [
            "humidity.target.value.w.step",
            "relativeHumidity.target.value.w.step",
            "targetHumidity.value.w.step",
            "humiditySetting.value.w.step"
          ]
        }
      },
      "create": { "when": "profileHasAny", "keys": ["humidity.target", "relativeHumidity.target", "targetHumidity", "humiditySetting"] },
      "action": { "enableWhen": "profileWriteableAny", "writeableKeys": ["humidity.target.mode", "relativeHumidity.target.mode", "targetHumidity.mode", "humiditySetting.mode"], "reassertOn": ["setup", "status"] },
      "read": { "sources": ["humidity.target", "relativeHumidity.target", "targetHumidity", "humiditySetting"] },
      "write": { "template": { "humidity": { "target": "@int" } } }
    },

    {
      "ident": "CURRENT_HUMIDITY",
      "name": "Ist-Feuchte",
      "type": "integer",
      "presentation": { "kind": "value", "suffix": " %" },
      "create": { "when": "statusHasAny", "keys": ["humidity.current", "currentHumidity", "relativeHumidity.current", "humidity", "humidityInPercent"] },
      "action": { "enableWhen": "never" },
      "read": { "sources": ["humidity.current", "currentHumidity", "relativeHumidity.current", "humidity", "humidityInPercent"] }
    },

    {
      "ident": "FAN_MODE",
      "name": "Lüfterstufe",
      "type": "integer",
      "presentation": { "kind": "buttons", "options": [
        { "value": 10, "caption": "Auto", "color": 52651 },
        { "value": 11, "caption": "Niedrig", "color": 3442154 },
        { "value": 12, "caption": "Mittel", "color": 16777215 },
        { "value": 13, "caption": "Hoch", "color": 16026947 },
        { "value": 14, "caption": "Power", "color": 16711680 }
      ] },
      "create": { "when": "profileHasAny", "keys": ["airFlow.windStrength", "fanSpeed", "windStrength"] },
      "action": { "enableWhen": "profileWriteableAny", "writeableKeys": ["airFlow.windStrength.mode", "fanSpeed.mode"], "reassertOn": ["setup", "status"] },
      "read": { "sources": ["airFlow.windStrength", "fanSpeed", "windStrength"], "map": { "AUTO": 10, "LOW": 11, "MID": 12, "HIGH": 13, "POWER": 14, "TURBO": 14 }, "mapCaseInsensitive": true },
      "write": { "enumMap": {
        "10": { "airFlow.windStrength": "AUTO",  "fanSpeed": "AUTO" },
        "11": { "airFlow.windStrength": "LOW",   "fanSpeed": "LOW" },
        "12": { "airFlow.windStrength": "MID",   "fanSpeed": "MID" },
        "13": { "airFlow.windStrength": "HIGH",  "fanSpeed": "HIGH" },
        "14": { "airFlow.windStrength": "POWER", "fanSpeed": "TURBO" }
      } }
    },

    {
      "ident": "DEHUM_MODE",
      "name": "Modus",
      "type": "integer",
      "presentation": { "kind": "buttons", "options": [
        { "value": 1, "caption": "Auto", "color": 52651 },
        { "value": 2, "caption": "Kontinuierlich", "color": 3442154 },
        { "value": 3, "caption": "Wäsche", "color": 16777215 },
        { "value": 4, "caption": "Leise", "color": 8421504 },
        { "value": 5, "caption": "Power", "color": 16711680 },
        { "value": 6, "caption": "Schnell", "color": 16026947 },
        { "value": 7, "caption": "Smart", "color": 16711935 }
      ] },
      "create": { "when": "profileHasAny", "keys": ["dehumidifierJobMode.currentJobMode", "dehumJobMode.currentJobMode", "operation.mode", "mode"] },
      "action": { "enableWhen": "profileWriteableAny", "writeableKeys": ["dehumidifierJobMode.currentJobMode.mode", "dehumJobMode.currentJobMode.mode", "operation.mode"], "reassertOn": ["setup", "status"] },
      "read": { "sources": ["dehumidifierJobMode.currentJobMode", "dehumJobMode.currentJobMode", "operation.mode", "mode"], "map": { "AUTO": 1, "CONTINUOUS": 2, "LAUNDRY": 3, "SILENT": 4, "POWER": 5, "FAST": 6, "SMART": 7 }, "mapCaseInsensitive": true },
      "write": { "enumMap": {
        "1": { "dehumidifierJobMode.currentJobMode": "AUTO" },
        "2": { "dehumidifierJobMode.currentJobMode": "CONTINUOUS" },
        "3": { "dehumidifierJobMode.currentJobMode": "LAUNDRY" },
        "4": { "dehumidifierJobMode.currentJobMode": "SILENT" },
        "5": { "dehumidifierJobMode.currentJobMode": "POWER" },
        "6": { "dehumidifierJobMode.currentJobMode": "FAST" },
        "7": { "dehumidifierJobMode.currentJobMode": "SMART" }
      } }
    },

    {
      "ident": "TANK_FULL",
      "name": "Tank voll",
      "type": "boolean",
      "presentation": { "kind": "switch", "captionOn": "Voll", "captionOff": "OK" },
      "create": { "when": "statusHasAny", "keys": ["tank.full", "waterTank.full", "tankStatus", "waterTankStatus"] },
      "action": { "enableWhen": "never" },
      "read": { "sources": ["tank.full", "waterTank.full", "tankStatus", "waterTankStatus"], "string_true": ["FULL", "TRUE", "1", "ON"], "string_false": ["EMPTY", "FALSE", "0", "OFF"] }
    },

    {
      "ident": "FILTER_REMAIN_PERCENT",
      "name": "Filter verbleibend",
      "type": "integer",
      "presentation": { "kind": "value", "suffix": " %" },
      "create": { "when": "profileHasAny", "keys": ["filter.remainPercent", "filterRemainPercent", "filter.remain"] },
      "action": { "enableWhen": "never" },
      "read": { "sources": ["filter.remainPercent", "filterRemainPercent", "filter.remain"] }
    },

    {
      "ident": "REMAIN_MIN",
      "name": "Restzeit",
      "type": "integer",
      "presentation": { "kind": "value", "suffix": " min" },
      "create": { "when": "profileHasAny", "keys": ["remainTime", "remainTime.minute", "remainTimeInMinute", "remainMinute"] },
      "action": { "enableWhen": "always", "reassertOn": ["status"] },
      "read": {
        "composite": { "combine": "hm_to_minutes", "parts": [ { "path": "remainTime.hour" }, { "path": "remainTime.minute" } ] },
        "sources": ["remainTimeInMinute", "remainMinute"]
      }
    },

    {
      "ident": "CHILD_LOCK",
      "name": "Kindersicherung",
      "type": "boolean",
      "presentation": { "kind": "switch", "captionOn": "An", "captionOff": "Aus" },
      "create": { "when": "profileHasAny", "keys": ["childLock", "childLock.enabled", "lock.child"] },
      "action": { "enableWhen": "profileWriteableAny", "writeableKeys": ["childLock.mode", "childLock.enabled.mode"], "reassertOn": ["setup", "status"] },
      "read": { "sources": ["childLock", "childLock.enabled", "lock.child"] },
      "write": { "template": { "childLock": { "enabled": "@bool" } } }
    }
  ]
}
