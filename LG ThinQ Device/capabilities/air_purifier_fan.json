{
  "capabilities": [
    {
      "ident": "POWER",
      "name": "Power",
      "type": "boolean",
      "presentation": { "kind": "switch", "captionOn": "An", "captionOff": "Aus" },
      "create": { "when": "profileHasAny", "keys": ["operation.power", "power", "is_on"] },
      "action": { "enableWhen": "never" },
      "read": { "sources": ["operation.power", "power", "is_on"], "map": { "ON": true, "1": true, "TRUE": true, "OFF": false, "0": false, "FALSE": false } }
    },

    {
      "ident": "PURIFIER_MODE",
      "name": "Modus",
      "type": "integer",
      "presentation": { "kind": "enumeration", "options": [
        { "value": 1, "caption": "Auto", "color": 52651 },
        { "value": 2, "caption": "Leise", "color": 3442154 },
        { "value": 3, "caption": "Niedrig", "color": 8421504 },
        { "value": 4, "caption": "Mittel", "color": 16026947 },
        { "value": 5, "caption": "Hoch", "color": 16711680 },
        { "value": 6, "caption": "Turbo", "color": 16711935 }
      ] },
      "create": { "when": "profileHasAny", "keys": ["airPuriFanJobMode.currentJobMode", "airPuriJobMode.currentJobMode", "operation.mode", "mode"] },
      "action": { "enableWhen": "profileWriteableAny", "writeableKeys": ["airPuriFanJobMode.currentJobMode.mode", "airPuriJobMode.currentJobMode.mode", "operation.mode"], "reassertOn": ["setup", "status"] },
      "read": { "sources": ["airPuriFanJobMode.currentJobMode", "airPuriJobMode.currentJobMode", "operation.mode", "mode"], "map": { "AUTO": 1, "SLEEP": 2, "SILENT": 2, "LOW": 3, "MID": 4, "HIGH": 5, "TURBO": 6 }, "mapCaseInsensitive": true },
      "write": {
        "enumMap": {
          "1": { "airPuriFanJobMode.currentJobMode": "AUTO", "airPuriJobMode.currentJobMode": "AUTO" },
          "2": { "airPuriFanJobMode.currentJobMode": "SLEEP", "airPuriJobMode.currentJobMode": "SLEEP" },
          "3": { "airPuriFanJobMode.currentJobMode": "LOW",   "airPuriJobMode.currentJobMode": "LOW" },
          "4": { "airPuriFanJobMode.currentJobMode": "MID",   "airPuriJobMode.currentJobMode": "MID" },
          "5": { "airPuriFanJobMode.currentJobMode": "HIGH",  "airPuriJobMode.currentJobMode": "HIGH" },
          "6": { "airPuriFanJobMode.currentJobMode": "TURBO", "airPuriJobMode.currentJobMode": "TURBO" }
        }
      }
    },

    {
      "ident": "FAN_MODE",
      "name": "Lüfterstufe",
      "type": "integer",
      "presentation": { "kind": "enumeration", "options": [
        { "value": 10, "caption": "Auto", "color": 52651 },
        { "value": 11, "caption": "Niedrig", "color": 3442154 },
        { "value": 12, "caption": "Mittel", "color": 16777215 },
        { "value": 13, "caption": "Hoch", "color": 16026947 },
        { "value": 14, "caption": "Turbo", "color": 16711680 }
      ] },
      "create": { "when": "profileHasAny", "keys": ["fanSpeed", "airFlow.windStrength", "windStrength"] },
      "action": { "enableWhen": "profileWriteableAny", "writeableKeys": ["fanSpeed.mode", "airFlow.windStrength.mode"], "reassertOn": ["setup", "status"] },
      "read": { "sources": ["fanSpeed", "airFlow.windStrength", "windStrength"], "map": { "AUTO": 10, "LOW": 11, "MID": 12, "HIGH": 13, "TURBO": 14 }, "mapCaseInsensitive": true },
      "write": { "enumMap": {
        "10": { "fanSpeed": "AUTO",  "airFlow.windStrength": "AUTO" },
        "11": { "fanSpeed": "LOW",   "airFlow.windStrength": "LOW" },
        "12": { "fanSpeed": "MID",   "airFlow.windStrength": "MID" },
        "13": { "fanSpeed": "HIGH",  "airFlow.windStrength": "HIGH" },
        "14": { "fanSpeed": "TURBO", "airFlow.windStrength": "TURBO" }
      } }
    },

    {
      "ident": "PM1",
      "name": "PM1",
      "type": "float",
      "presentation": { "kind": "value", "suffix": " µg/m³", "digits": 0 },
      "create": { "when": "statusHasAny", "keys": ["airQuality.pm1", "pm1", "particulateMatter1"] },
      "action": { "enableWhen": "never" },
      "read": { "sources": ["airQuality.pm1", "pm1", "particulateMatter1"] }
    },
    {
      "ident": "PM2_5",
      "name": "PM2.5",
      "type": "float",
      "presentation": { "kind": "value", "suffix": " µg/m³", "digits": 0 },
      "create": { "when": "statusHasAny", "keys": ["airQuality.pm2p5", "pm2p5", "pm2_5", "particulateMatter25"] },
      "action": { "enableWhen": "never" },
      "read": { "sources": ["airQuality.pm2p5", "pm2p5", "pm2_5", "particulateMatter25"] }
    },
    {
      "ident": "PM10",
      "name": "PM10",
      "type": "float",
      "presentation": { "kind": "value", "suffix": " µg/m³", "digits": 0 },
      "create": { "when": "statusHasAny", "keys": ["airQuality.pm10", "pm10", "particulateMatter10"] },
      "action": { "enableWhen": "never" },
      "read": { "sources": ["airQuality.pm10", "pm10", "particulateMatter10"] }
    },

    {
      "ident": "AIR_QUALITY_INDEX",
      "name": "Luftqualität",
      "type": "integer",
      "presentation": { "kind": "value" },
      "create": { "when": "statusHasAny", "keys": ["airQualityIndex", "airQuality.index", "iaq"] },
      "action": { "enableWhen": "never" },
      "read": { "sources": ["airQualityIndex", "airQuality.index", "iaq"] }
    },

    {
      "ident": "ODOR",
      "name": "Geruch",
      "type": "integer",
      "presentation": { "kind": "value" },
      "create": { "when": "statusHasAny", "keys": ["odor", "airQuality.odor", "smell"] },
      "action": { "enableWhen": "never" },
      "read": { "sources": ["odor", "airQuality.odor", "smell"] }
    },

    {
      "ident": "HUMIDITY",
      "name": "Luftfeuchte",
      "type": "integer",
      "presentation": { "kind": "value", "suffix": " %" },
      "create": { "when": "statusHasAny", "keys": ["humidity", "airQuality.humidity"] },
      "action": { "enableWhen": "never" },
      "read": { "sources": ["humidity", "airQuality.humidity"] }
    },

    {
      "ident": "FILTER_REMAIN_PERCENT",
      "name": "Filter verbleibend",
      "type": "integer",
      "presentation": { "kind": "value", "suffix": " %" },
      "create": { "when": "profileHasAny", "keys": ["filter.remainPercent", "filterRemainPercent", "filter.remain"] },
      "action": { "enableWhen": "never" },
      "read": { "sources": ["filter.remainPercent", "filterRemainPercent", "filter.remain"] }
    },

    {
      "ident": "DISPLAY_LIGHT",
      "name": "Display",
      "type": "boolean",
      "presentation": { "kind": "switch", "captionOn": "An", "captionOff": "Aus" },
      "create": { "when": "profileHasAny", "keys": ["display.light", "display"] },
      "action": { "enableWhen": "profileWriteableAny", "writeableKeys": ["display.light.mode", "display.mode"], "reassertOn": ["setup", "status"] },
      "read": { "sources": ["display.light", "display"], "string_true": ["ON", "TRUE", "1"], "string_false": ["OFF", "FALSE", "0"] },
      "write": { "firstOf": [
        { "profileWriteableAny": ["display.light.mode"], "attribute": { "resource": "display", "property": "light", "valueTemplate": "@onoff" } },
        { "profileHasAny": ["display.light"],           "attribute": { "resource": "display", "property": "light", "valueTemplate": "@onoff" } },
        { "template": { "display": { "light": "@onoff" } } }
      ] }
    },

    {
      "ident": "IONIZER",
      "name": "Ionisator",
      "type": "boolean",
      "presentation": { "kind": "switch", "captionOn": "An", "captionOff": "Aus" },
      "create": { "when": "profileHasAny", "keys": ["ionizer", "ion", "plasma"] },
      "action": { "enableWhen": "profileWriteableAny", "writeableKeys": ["ionizer.mode", "ion.mode", "plasma.mode"], "reassertOn": ["setup", "status"] },
      "read": { "sources": ["ionizer", "ion", "plasma"], "string_true": ["ON", "TRUE", "1"], "string_false": ["OFF", "FALSE", "0"] },
      "write": { "template": { "ionizer": "@onoff" } }
    },

    {
      "ident": "CHILD_LOCK",
      "name": "Kindersicherung",
      "type": "boolean",
      "presentation": { "kind": "switch", "captionOn": "An", "captionOff": "Aus" },
      "create": { "when": "profileHasAny", "keys": ["childLock", "childLock.enabled", "lock.child"] },
      "action": { "enableWhen": "profileWriteableAny", "writeableKeys": ["childLock.mode", "childLock.enabled.mode"], "reassertOn": ["setup", "status"] },
      "read": { "sources": ["childLock", "childLock.enabled", "lock.child"] },
      "write": { "attribute": { "resource": "childLock", "property": "enabled", "valueTemplate": "@bool" } }
    }
  ]
}
