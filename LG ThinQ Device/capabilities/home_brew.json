{
  "capabilities": [
    {
      "ident": "HOMEBREW_OPERATION",
      "name": "Betrieb",
      "type": "integer",
      "presentation": { "kind": "buttons", "options": [
        { "value": 1, "caption": "Start" },
        { "value": 2, "caption": "Pause" },
        { "value": 0, "caption": "Stop" }
      ] },
      "create": { "when": "profileHasAny", "keys": ["operation.homeBrewOperationMode", "homeBrewOperationMode", "operation.mode"] },
      "action": { "enableWhen": "profileWriteableAny", "writeableKeys": ["operation.homeBrewOperationMode.mode", "homeBrewOperationMode.mode", "operation.mode"], "reassertOn": ["setup", "status"] },
      "read": { "sources": ["operation.homeBrewOperationMode", "homeBrewOperationMode", "operation.mode"], "map": { "START": 1, "PAUSE": 2, "STOP": 0 }, "mapCaseInsensitive": true },
      "write": { "enumMap": {
        "1": { "operation.homeBrewOperationMode": "START" },
        "2": { "operation.homeBrewOperationMode": "PAUSE" },
        "0": { "operation.homeBrewOperationMode": "STOP" }
      } }
    },

    {
      "ident": "POWER",
      "name": "Power",
      "type": "boolean",
      "presentation": { "kind": "switch", "captionOn": "An", "captionOff": "Aus" },
      "create": { "when": "profileHasAny", "keys": ["operation.power", "power", "is_on"] },
      "action": { "enableWhen": "never" },
      "read": { "sources": ["operation.power", "power", "is_on"], "map": { "ON": true, "1": true, "TRUE": true, "OFF": false, "0": false, "FALSE": false } }
    },

    {
      "ident": "RUN_STATE",
      "name": "Status",
      "type": "string",
      "presentation": { "kind": "value" },
      "create": { "when": "statusHasAny", "keys": ["runState.currentState", "processState.currentState", "currentState", "runState", "processState", "brewState", "state"] },
      "action": { "enableWhen": "never" },
      "read": { "sources": ["runState.currentState", "processState.currentState", "currentState", "runState", "processState", "brewState", "state"] }
    },

    {
      "ident": "REMAIN_MIN",
      "name": "Restzeit",
      "type": "integer",
      "presentation": { "kind": "value", "suffix": " min" },
      "create": { "when": "statusHasAny", "keys": ["remainTime", "remainTime.minute", "remainTimeInMinute", "remainMinute", "timer.remainMinute"] },
      "action": { "enableWhen": "never" },
      "read": {
        "composite": { "combine": "hm_to_minutes", "parts": [ { "path": "remainTime.hour" }, { "path": "remainTime.minute" } ] },
        "sources": ["remainTimeInMinute", "remainMinute", "timer.remainMinute"]
      }
    },

    {
      "ident": "PROGRESS",
      "name": "Fortschritt",
      "type": "integer",
      "presentation": { "kind": "value", "suffix": " %" },
      "create": { "when": "statusHasAny", "keys": ["process.progress", "progress"] },
      "action": { "enableWhen": "never" },
      "read": { "sources": ["process.progress", "progress"] }
    },

    {
      "ident": "RECIPE_NAME",
      "name": "Rezept",
      "type": "string",
      "presentation": { "kind": "value" },
      "create": { "when": "profileHasAny", "keys": ["recipe.name", "recipe", "course", "program", "state.course"] },
      "action": { "enableWhen": "never" },
      "read": { "sources": ["recipe.name", "recipe", "course", "program", "state.course"] }
    },

    {
      "ident": "CLEANING_OPERATION",
      "name": "Reinigung",
      "type": "integer",
      "presentation": { "kind": "buttons", "options": [
        { "value": 1, "caption": "Start" },
        { "value": 0, "caption": "Stop" }
      ] },
      "create": { "when": "profileHasAny", "keys": ["cleaning.operation", "clean.operation", "sanitize.operation"] },
      "action": { "enableWhen": "profileWriteableAny", "writeableKeys": ["cleaning.operation.mode", "clean.operation.mode", "sanitize.operation.mode"], "reassertOn": ["setup", "status"] },
      "read": { "sources": ["cleaning.operation", "clean.operation", "sanitize.operation"], "map": { "START": 1, "STOP": 0 }, "mapCaseInsensitive": true },
      "write": { "enumMap": {
        "1": { "cleaning.operation": "START" },
        "0": { "cleaning.operation": "STOP" }
      } }
    },

    {
      "ident": "STERILIZE",
      "name": "Sterilisieren",
      "type": "boolean",
      "presentation": { "kind": "switch", "captionOn": "An", "captionOff": "Aus" },
      "create": { "when": "profileHasAny", "keys": ["sterilize", "sterilization", "sanitize"] },
      "action": { "enableWhen": "profileWriteableAny", "writeableKeys": ["sterilize.mode", "sterilization.mode", "sanitize.mode"], "reassertOn": ["setup", "status"] },
      "read": { "sources": ["sterilize", "sterilization", "sanitize"], "string_true": ["ON", "TRUE", "1"], "string_false": ["OFF", "FALSE", "0"] },
      "write": { "template": { "sterilize": "@onoff" } }
    },

    {
      "ident": "WATER_TANK_PERCENT",
      "name": "Wassertank",
      "type": "integer",
      "presentation": { "kind": "value", "suffix": " %" },
      "create": { "when": "statusHasAny", "keys": ["waterTank.remainPercent", "tank.remainPercent"] },
      "action": { "enableWhen": "never" },
      "read": { "sources": ["waterTank.remainPercent", "tank.remainPercent"] }
    },

    {
      "ident": "DOOR_OPEN",
      "name": "TÃ¼r offen",
      "type": "boolean",
      "presentation": { "kind": "switch", "captionOn": "Offen", "captionOff": "Zu" },
      "create": { "when": "statusHasAny", "keys": ["doorOpen", "door", "door.status"] },
      "action": { "enableWhen": "never" },
      "read": { "sources": ["doorOpen", "door", "door.status"], "string_true": ["OPEN", "ON", "TRUE", "1"], "string_false": ["CLOSE", "CLOSED", "OFF", "FALSE", "0"] }
    },

    {
      "ident": "CHILD_LOCK",
      "name": "Kindersicherung",
      "type": "boolean",
      "presentation": { "kind": "switch", "captionOn": "An", "captionOff": "Aus" },
      "create": { "when": "profileHasAny", "keys": ["childLock", "childLock.enabled", "lock.child"] },
      "action": { "enableWhen": "profileWriteableAny", "writeableKeys": ["childLock.mode", "childLock.enabled.mode"], "reassertOn": ["setup", "status"] },
      "read": { "sources": ["childLock", "childLock.enabled", "lock.child"] },
      "write": { "template": { "childLock": { "enabled": "@bool" } } }
    }
  ]
}
